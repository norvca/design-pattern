<!-- Modal box example with Singleton -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>单例模式弹框</title>
</head>
<style>
  #modal {
    height: 200px;
    width: 200px;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    border: 1px solid black;
    align-items: center;
    justify-content: center;
  }
</style>

<body>
  <button id='open'>打开弹框</button>
  <button id='close'>关闭弹框</button>
</body>
<script>

  // Closure version
  const getModal = (() => {
    let modal = null;

    return () => {
      if (!modal) {
        modal = document.createElement('div');
        modal.innerHTML = 'I am the single modal!';
        modal.id = 'modal';
        document.body.appendChild(modal);
      }
      return modal;
    }
  })()

  // Class version
  // class Modal {
  //   static instance;

  //   static getInstance() {
  //     if (!Modal.instance) {
  //       Modal.instance = document.createElement('div');
  //       Modal.instance.innerHTML = 'I am the single modal!';
  //       Modal.instance.id = 'modal';
  //       document.body.appendChild(Modal.instance);
  //     }
  //     return Modal.instance;
  //   }
  // }


  document.getElementById('open').addEventListener('click', function () {
    const modal = getModal();
    // const modal = Modal.getInstance()
    modal.style.display = 'flex';
  })

  document.getElementById('close').addEventListener('click', function () {
    const modal = getModal();
    // const modal = Modal.getInstance()
    modal.style.display = 'none';
  })
</script>

</html>